(()=>{"use strict";var t={834:(t,e,o)=>{function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(var e in this.hooks={},this.options={},this.defaultOptions)this.options[e]=e in t?t[e]:this.defaultOptions[e];this.options.autoload&&this.load()}t=o.nmd(t),r.prototype.defaultOptions={selector:"video[data-yt2html5]",attribute:"data-yt2html5",formats:"*",autoload:!0,withAudio:!1},r.prototype.globalHooks={},r.prototype.getHooks=function(t,e){var o=[];if(t in this.globalHooks){var n=this.globalHooks[t];n=(n=n.filter((function(t){return t.name===e}))).sort((function(t,e){return t.priority-e.priority})),o=o.concat(n)}if(t in this.hooks){var r=this.hooks[t];r=(r=r.filter((function(t){return t.name===e}))).sort((function(t,e){return t.priority-e.priority})),o=o.concat(r)}return o},r.prototype.addHook=function(t,e){t in this.globalHooks||(this.globalHooks[t]=[]),t in this.hooks||(this.hooks[t]=[]),"global"in e&&e.global?this.globalHooks[t].push(e):this.hooks[t].push(e)},r.prototype.addAction=function(t,e){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,n=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3];this.addHook("actions",{name:t,callback:e,priority:o,global:n})},r.prototype.doAction=function(t){for(var e=this.getHooks("actions",t),o=arguments.length,n=Array(1<o?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];for(var i=0;i<e.length;i++){var a;(a=e[i]).callback.apply(a,n)}},r.prototype.addFilter=function(t,e){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,n=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3];this.addHook("filters",{name:t,callback:e,priority:o,global:n})},r.prototype.applyFilters=function(t,e){for(var o=this.getHooks("filters",t),n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];for(var a=0;a<o.length;a++){var s;e=(s=o[a]).callback.apply(s,[e].concat(r))}return e},r.prototype.itagMap={18:"360p",22:"720p",37:"1080p",38:"3072p",82:"360p3d",83:"480p3d",84:"720p3d",85:"1080p3d",133:"240pna",134:"360pna",135:"480pna",136:"720pna",137:"1080pna",264:"1440pna",298:"720p60",299:"1080p60na",160:"144pna",139:"48kbps",140:"128kbps",141:"256kbps"},r.prototype.urlToId=function(t){var e=t.match(/^(?:http(?:s)?:\/\/)?(?:www\.)?(?:m\.)?(?:youtu\.be\/|(?:(?:youtube-nocookie\.com\/|youtube\.com\/)(?:(?:watch)?\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\/)))([a-zA-Z0-9\-_]*)/);return Array.isArray(e)&&e[1]?e[1]:t},r.prototype.fetch=function(t){return new Promise((function(e,o){var n=new XMLHttpRequest;n.open("GET",t,!0),n.onreadystatechange=function(){4===this.readyState&&(200<=this.status&&400>this.status?e(this.responseText):o(this))},n.send(),n=null}))},r.prototype.getAllowedFormats=function(){var t=[];return Array.isArray(this.options.formats)?t=this.options.formats:this.itagMap[this.options.formats]?t=[this.options.formats]:"*"===this.options.formats&&(t=Object.values(this.itagMap).sort()),t},r.prototype.getElements=function(t){var e=null;return t&&(e=NodeList.prototype.isPrototypeOf(t)||HTMLCollection.prototype.isPrototypeOf(t)?t:"object"===n(t)&&"nodeType"in t&&t.nodeType?[t]:document.querySelectorAll(this.options.selector)),e=Array.from(e||""),this.applyFilters("elements",e)},r.prototype.youtubeDataApiEndpoint=function(t){var e="https://yt2html5.com/?id=".concat(t);return this.applyFilters("api.endpoint",e,t,null)},r.prototype.parseUriString=function(t){return t.split("&").reduce((function(t,e){var o=e.split("=").map((function(t){return decodeURIComponent(t.replace("+"," "))}));return t[o[0]]=o[1],t}),{})},r.prototype.canPlayType=function(t){var e=null;return((e=/^audio/i.test(t)?document.createElement("audio"):document.createElement("video"))&&"function"==typeof e.canPlayType?e.canPlayType(t):"unknown")||"no"},r.prototype.parseYoutubeMeta=function(t){var e=this,o=[],n=[];if("string"==typeof t)try{t=JSON.parse(t)}catch(t){return null}var r=t.data||{};return(r=this.applyFilters("api.response",r,t)).hasOwnProperty("url_encoded_fmt_stream_map")&&(o=o.concat(r.url_encoded_fmt_stream_map.split(",").map((function(t){return e.parseUriString(t)})))),r.player_response.streamingData&&r.player_response.streamingData.formats&&(o=o.concat(r.player_response.streamingData.formats)),r.hasOwnProperty("adaptive_fmts")&&(o=o.concat(r.adaptive_fmts.split(",").map((function(t){return e.parseUriString(t)})))),r.player_response.streamingData&&r.player_response.streamingData.adaptiveFormats&&(o=o.concat(r.player_response.streamingData.adaptiveFormats)),o.forEach((function(t){if(t&&"itag"in t&&e.itagMap[t.itag]){var o={_raw:t,itag:t.itag,url:null,label:null,type:"unknown",mime:"unknown",hasAudio:!1,browserSupport:"unknown"};if("url"in t&&t.url&&(o.url=t.url),"audioQuality"in t&&t.audioQuality&&(o.hasAudio=!0),o.label="qualityLabel"in t&&t.qualityLabel?t.qualityLabel:e.itagMap[t.itag],"mimeType"in t){var r=t.mimeType.match(/^(audio|video)(?:\/([^;]+);)?/i);r[1]&&(o.type=r[1]),r[2]&&(o.mime=r[2]),o.browserSupport=e.canPlayType("".concat(o.type,"/").concat(o.mime))}o.url&&n.push(o)}})),n=this.applyFilters("api.results",n,r)},r.prototype.load=function(){var t=this,e=this.getElements(this.options.selector);e&&e.length&&e.forEach((function(e){t.loadSingle(e)}))},r.prototype.loadSingle=function(t){var e=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=o||this.options.attribute;if(t.getAttribute(n)){var r=this.urlToId(t.getAttribute(n)),i=this.youtubeDataApiEndpoint(r);this.doAction("api.before",t),this.fetch(i).then((function(o){if(o){var n=e.parseYoutubeMeta(o);if(n&&Array.isArray(n)){(n=n.filter((function(e){return e.type===t.tagName.toLowerCase()}))).sort((function(t,e){var o={unknown:-1,no:-1,maybe:0,probably:1};return o[t.browserSupport]+o[e.browserSupport]})),e.options.withAudio&&(n=n.filter((function(t){return t.hasAudio})));for(var i=e.getAllowedFormats(),a=null,s=null,u=function(t){var o=i[t],r=n.filter((function(t){return e.itagMap[t.itag]===o}));if(r&&r.length)return a=r.shift(),s=o,"break"},p=0;p<i.length&&"break"!==u(p);p++);var l={src:"",type:""};(a=e.applyFilters("video.stream",a,t,s,n))&&"url"in a&&a.url&&(l.src=a.url),a.type&&"unknown"!==a.type&&a.mime&&"unknown"!==a.mime&&(l.type="".concat(a.type,"/").concat(a.mime)),l.src=e.applyFilters("video.source",l.src,a,t,s,n),l.src&&"function"==typeof l.src.toString&&l.src.toString().length?(t.src=l.src,l.type&&l.type.length&&(t.type=l.type)):console.warn("YouTubeToHtml5 unable to load video for ID: ".concat(r))}}})).finally((function(o){e.doAction("api.after",t,o)}))}},"object"===n(t)&&"object"===n(t.exports)&&(t.exports=r)},34:(t,e,o)=>{o.d(e,{Z:()=>i});var n=o(645),r=o.n(n)()((function(t){return t[1]}));r.push([t.id,"body{background-color:#191624;color:#fff;font-family:monospace;font-size:1.2rem}h1{margin-bottom:4rem}section{margin-bottom:.4rem;width:min(90%, 800px);margin:0 auto}li{opacity:.8}video{width:min(90%, 1440px);height:auto;display:block;margin:4rem auto}input,button{width:100%;padding:.4rem .8rem;box-sizing:border-box;margin-bottom:.4rem}.videoInfo{display:flex;gap:.4rem;margin-top:4rem}.videoInfo div{flex:1}",""]);const i=r},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var o=t(e);return e[2]?"@media ".concat(e[2]," {").concat(o,"}"):o})).join("")},e.i=function(t,o,n){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(n)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(r[a]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);n&&r[u[0]]||(o&&(u[2]?u[2]="".concat(o," and ").concat(u[2]):u[2]=o),e.push(u))}},e}},379:t=>{var e=[];function o(t){for(var o=-1,n=0;n<e.length;n++)if(e[n].identifier===t){o=n;break}return o}function n(t,n){for(var i={},a=[],s=0;s<t.length;s++){var u=t[s],p=n.base?u[0]+n.base:u[0],l=i[p]||0,c="".concat(p," ").concat(l);i[p]=l+1;var d=o(c),f={css:u[1],media:u[2],sourceMap:u[3]};-1!==d?(e[d].references++,e[d].updater(f)):e.push({identifier:c,updater:r(f,n),references:1}),a.push(c)}return a}function r(t,e){var o=e.domAPI(e);return o.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o.update(t=e)}else o.remove()}}t.exports=function(t,r){var i=n(t=t||[],r=r||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var s=o(i[a]);e[s].references--}for(var u=n(t,r),p=0;p<i.length;p++){var l=o(i[p]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}i=u}}},569:t=>{var e={};t.exports=function(t,o){var n=function(t){if(void 0===e[t]){var o=document.querySelector(t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}e[t]=o}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(o)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e),e}},565:(t,e,o)=>{t.exports=function(t){var e=o.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(o){!function(t,e,o){var n=o.css,r=o.media,i=o.sourceMap;r?t.setAttribute("media",r):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(n,t)}(e,t,o)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function o(n){var r=e[n];if(void 0!==r)return r.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n](i,i.exports,o),i.loaded=!0,i.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t=o(834),e=o.n(t),n=o(379),r=o.n(n),i=o(795),a=o.n(i),s=o(569),u=o.n(s),p=o(565),l=o.n(p),c=o(216),d=o.n(c),f=o(589),y=o.n(f),m=o(34),h={};h.styleTagTransform=y(),h.setAttributes=l(),h.insert=u().bind(null,"head"),h.domAPI=a(),h.insertStyleElement=d(),r()(m.Z,h),m.Z&&m.Z.locals&&m.Z.locals;const v=(t,e)=>e.innerText=t;loadVideo.onclick=()=>{""!==inputVideo.value?(youtubeVideo.setAttribute("data-yt",inputVideo.value),new(e())({selector:".youtube-video",attribute:"data-yt",withAudio:!0}),youtubeVideo.addEventListener("timeupdate",(()=>{const t=youtubeVideo.currentTime>=Number(inputOut.innerText);b&&t&&(youtubeVideo.pause(),b=!1)}))):alert("Coloque a URL do Youtube")},window.addEventListener("keydown",(({key:t})=>{"i"===t&&v(youtubeVideo.currentTime,inputIn),"o"===t&&v(youtubeVideo.currentTime,inputOut),"p"===t&&(b=!0,youtubeVideo.currentTime=Number(inputIn.innerText),youtubeVideo.play()),"d"===t&&(message.style.color="orange",message.innerText="start converting video",fetch("http://localhost:3000/download",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({inputIn:Number(inputIn.innerText),inputOut:Number(inputOut.innerText),inputVideo:inputVideo.value})}).then((t=>t.json())).then((t=>{if(t.includes(".mp4"))return message.style.color="green",message.innerText="Success!",youtubeVideo.src=t,void(youtubeVideo.autoplay=!0);message.style.color="red",message.innerText=result})))}));let b=!1})()})();